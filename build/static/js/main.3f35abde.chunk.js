(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{145:function(e,t,a){},173:function(e,t,a){},194:function(e,t,a){},199:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(42),s=a.n(r),o=(a(173),a(8)),l=a(58),i=a(13),d=a(39),u=a(15),b=a(21),j=a(47),h=a(33),x=a(70),O=a(75),m=a(46),g=a.n(m),p=a(29),f=a(82),v=(a(192),a(1));f.a,f.b.configure();var w=function(e){f.b.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},S=function(e){f.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},y=function(e){f.b.info(e,{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},N=function(e,t,a,n){if(e-a.amount<0)return S("Buy Order can't be executed not enough balance"),{success:!1,newBalance:e,newHolding:t};var c=e-a.amount,r=Object(d.a)({},t),s=a.amount/n[a.coinSelectedName];return r[a.coinSelectedName]?r[a.coinSelectedName]+=s:r[a.coinSelectedName]=s,w("Buy Order executed successfully for amount: $".concat(a.amount)),{success:!0,newBalance:c,newHolding:r}},C=function(e,t,a,n){if(e-a.amount<0)return S("Sort Order can't be executed not enough balance"),{success:!1,newBalance:e,newSortedHolding:t};var c=e-a.amount,r=Object(d.a)({},t),s=a.amount/n[a.coinSelectedName],o={amount:a.amount,coinBought:s};return r[a.coinSelectedName]||(r[a.coinSelectedName]=[]),r[a.coinSelectedName].push(o),w("Sort Order executed successfully for amount: $".concat(a.amount)),{success:!0,newBalance:c,newSortedHolding:r}},A=function(e,t,a,n,c){var r=n.amount/c[n.coinSelectedName],s=Object(d.a)({},t),o=e;return s[n.coinSelectedName]<r?(S("Sell Order can not be placed not enough holding for ".concat(n.coinSelectedName)),{success:!1,newBalance:o,newHolding:s}):(s[n.coinSelectedName]-=r,o=e+n.amount,0==s[n.coinSelectedName]&&delete s[n.coinSelectedName],w("Sell Order executed successfully for amount: $".concat(n.amount)),{success:!0,newBalance:o,newHolding:s})},k=function(e,t,a,n){return y("Sell Sort Now is yet to be properly implemented!"),{success:!1,newBalance:e,newSortedHolding:t}},P=function(){var e=Object(b.a)(Object(u.a)().mark((function e(t,a,n,c,r){var s,o,l,i,d,b,j,h,x,O,m,f,v,w,S,y,A,k,P,T,B,H,W,D;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=a,o=n,l=c,i=t.slice(),d=null,b={},j=0;j<i.length;j++)!1===(h=i[j]).orderCompleted&&(d||(console.log("oldest order that was not completed",h),d=h.time),b[j]=h);if(console.log("\n unfinished orders",b),console.log("\n oldes unfished order",d),null!==d){e.next=12;break}return console.log("No pendign orders"),e.abrupt("return",{newBalance:s,newHolding:o,newSortedHolding:l,updatedAllOrders:i});case 12:return x="https://api.coincap.io/v2/assets/bitcoin/history?interval=h1&start?=".concat(d),console.log(x),e.next=16,g.a.get(x,{raxConfig:{retry:5,retryDelay:800}});case 16:O=e.sent,console.log(O),m=O.data.data,console.log("data fetched",m),console.log(typeof d,new Date(m[0].date).getTime(),typeof m[0].date),e.t0=Object(u.a)().keys(b);case 22:if((e.t1=e.t0()).done){e.next=74;break}f=e.t1.value,v=b[f],w=Object(p.a)(m),e.prev=26,w.s();case 28:if((S=w.n()).done){e.next=64;break}if(y=S.value,F=y.date,U=d,!(new Date(F).getTime()>new Date(U).getTime())){e.next=62;break}if(!(v.priceWhenOrderWasPlaced>=v.executeWhenPriceAt&&Number(y.priceUsd)<=v.executeWhenPriceAt||v.priceWhenOrderWasPlaced<=v.executeWhenPriceAt&&Number(y.priceUsd)>=v.executeWhenPriceAt)){e.next=62;break}console.log("\n\n price range matched",v,Number(y.priceUsd));case 33:if(null!==r()[v.coinSelectedName]){e.next=39;break}return console.log("current price not defined awaiting"),e.next=37,new Promise((function(e){return setTimeout(e,500)}));case 37:e.next=33;break;case 39:if("buyAt"!==v.type){e.next=49;break}if(A=N(a,n,v,r()),k=A.success,P=A.newBalance,T=A.newHolding,k){e.next=43;break}return e.abrupt("return");case 43:console.log("order was",v,r()),console.log("executing buy at",P,T),s=P,o=T,e.next=59;break;case 49:if("sortAt"!==v.type){e.next=58;break}if(B=C(a,c,v,r()),H=B.success,W=B.newBalance,D=B.newSortedHolding,H){e.next=53;break}return e.abrupt("return");case 53:console.log("executing sortAt",W,D),s=W,l=D,e.next=59;break;case 58:console.log("can not complete a unfinished order cause its not buyAt/sortAt",v);case 59:return v.orderCompleted=!0,i[f]=v,e.abrupt("break",64);case 62:e.next=28;break;case 64:e.next=69;break;case 66:e.prev=66,e.t2=e.catch(26),w.e(e.t2);case 69:return e.prev=69,w.f(),e.finish(69);case 72:e.next=22;break;case 74:return console.log(" updatedAllOrders",i),e.abrupt("return",{newBalance:s,newHolding:o,newSortedHolding:l,updatedAllOrders:i});case 76:case"end":return e.stop()}var F,U}),e,null,[[26,66,69,72]])})));return function(t,a,n,c,r){return e.apply(this,arguments)}}();a(145),a(194);var T=function(){return Object(v.jsx)("div",{className:"HeaderComp",children:Object(v.jsx)("h1",{children:"Virtual Trading"})})},B=a(122),H=a.n(B),W=(a(199),a(76));function D(e){return Object(v.jsx)("div",{className:"widget-class",children:Object(v.jsx)(H.a,{symbol:Object(W.convertNameToTradingviewSybmol)(e.coinSelectedName),width:950,height:550,timezone:"Asia/Kolkata",locale:"in",style:"2",theme:B.Themes.DARK,range:"12m",allow_symbol_change:!1,details:!0,studies:["MASimple@tv-basicstudies"]})})}var F=c.a.memo(D),U=a(301),L=a(152),I=a.n(L),$=a(151),E=a.n($),R=a(125),M=a.n(R),J=a(316),_=a(296),q=a(290),z=a(297),Q=a(319),V=a(295),Y=a(320),G=a(283),K=a(289),X=a(307),Z=a(304),ee=a(305),te=a(321),ae=a(293),ne=a(298),ce=a(322),re=a(294),se=a(323),oe=a(77),le={modal:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#131721",color:"white",border:"2px solid #FFFFFF",boxShadow:24,p:4},list:{width:"100%",height:"70%",maxWidth:360,color:"white",bgcolor:"#131722",borderRadius:3},dropList:{color:"black",bgcolor:"white",borderRadius:"5px",marginTop:"15px",marginBottom:"10px",maxWidth:"56%"},textBox:{bgcolor:"white",borderRadius:"5px",maxWidth:"80%",marginLeft:"15px"},stack:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"10px"},coinlist:{width:"auto"},radioList:{display:"flex",flexDirection:"row",justifyContent:"space-around",width:"60%",margin:"0px"},radioButton:{overFlow:"hidden",whiteSpace:"nowrap",maxWidth:"50%",fontSize:"10px"},bgtext:{bgcolor:"#131721",color:"white"},tabsAlign:{display:"flex",justifyContent:"center"},upMarign:{marginTop:"30px"}};function ie(e){var t="white";"negative"===e.lastTotalAssetChange?t="red":"positive"===e.lastTotalAssetChange&&(t="#32CD32");var a=c.a.useState("bitcoin"),r=Object(o.a)(a,2),s=r[0],l=r[1],i=Object(n.useState)(""),d=Object(o.a)(i,2),u=d[0],b=d[1],j=Object(n.useState)(null),h=Object(o.a)(j,2),x=h[0],O=h[1],m=Object(n.useState)(null),g=Object(o.a)(m,2),f=g[0],w=g[1],S=Object(n.useState)(null),y=Object(o.a)(S,2),N=y[0],C=y[1],A=Object(n.useState)(null),k=Object(o.a)(A,2),P=k[0],T=k[1],B=Object(n.useState)(null),H=Object(o.a)(B,2),D=H[0],F=H[1],L=Object(n.useState)(!1),$=Object(o.a)(L,2),R=$[0],ie=$[1],de=Object(n.useState)(!1),ue=Object(o.a)(de,2),be=ue[0],je=ue[1],he=Object(n.useState)(!1),xe=Object(o.a)(he,2),Oe=xe[0],me=xe[1],ge=function(){je(!1),O(null),C(null)},pe=Object(n.useState)(0),fe=Object(o.a)(pe,2),ve=fe[0],we=fe[1],Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return""===e?"":Object(oe.numberWithCommas)(parseFloat(e.toFixed(t)))};return Object(v.jsxs)("div",{className:"BuySell-div",children:[Object(v.jsx)("div",{className:"Dropdown",children:Object(v.jsxs)(J.a,{fullWidth:!0,children:[Object(v.jsx)(_.a,{id:"demo-simple-select-label",children:"Coin"}),Object(v.jsxs)(q.a,{sx:le.coinlist,labelId:"demo-simple-select-label",id:"demo-simple-select",fullWidth:!0,value:s,label:"Coin",onChange:function(t){l(t.target.value),e.onChange(t.target.value)},children:[Object(v.jsx)(z.a,{value:"bitcoin",children:"Bitcoin"}),Object(v.jsx)(z.a,{value:"ethereum",children:"Ethereum"}),Object(v.jsx)(z.a,{value:"dogecoin",children:"Doge Coin"}),Object(v.jsx)(z.a,{value:"tesla",children:"Tesla"})]})]})}),Object(v.jsxs)(Q.a,{sx:le.list,children:[Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Y.a,{children:Object(v.jsx)(Y.a,{children:Object(v.jsx)(E.a,{fontSize:"large"})})}),Object(v.jsx)(G.a,{disableTypography:!0,primary:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(U.a,{display:"inline",children:"Total Assets: $ "}),Object(v.jsx)(U.a,{display:"inline",style:{color:t},children:Se(e.totalAssetAmt)})]})})]}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Y.a,{children:Object(v.jsx)(I.a,{fontSize:"large"})}),Object(v.jsx)(G.a,{primary:"Balance: $ ".concat(Object(oe.numberWithCommas)(e.balance))})]}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Y.a,{children:Object(v.jsx)(Y.a,{children:Object(v.jsx)(M.a,{fontSize:"large"})})}),Object(v.jsx)(G.a,{primary:"Holdings: "})]}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Y.a,{children:Object(v.jsx)(Y.a,{})}),function(t){var a="";if(!t)return a;for(var n in a+="\n\n",t)a+=n,a+=": $",a+=Se(t[n]*e.currentPrice[n],2),a+="\n";return Object(v.jsx)("div",{style:{marginTop:"-10px"},children:a.split(/\n/).map((function(e){return Object(v.jsx)("div",{children:e})}))})}(e.holding)]}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Y.a,{children:Object(v.jsx)(Y.a,{children:Object(v.jsx)(M.a,{fontSize:"large"})})}),Object(v.jsx)(G.a,{primary:"Sorted Holdings"})]}),Object(v.jsxs)(V.a,{children:[Object(v.jsx)(Y.a,{children:Object(v.jsx)(Y.a,{})}),function(t){var a="";if(!t)return a;for(var n in t)if(e.currentPrice[n]){a+=n,a+=": $ ";var c,r=0,s=Object(p.a)(t[n]);try{for(s.s();!(c=s.n()).done;){var o=c.value;o.amount,r+=2*o.amount-o.coinBought*e.currentPrice[n]}}catch(l){s.e(l)}finally{s.f()}a+=Se(r,2),a+="\n"}return Object(v.jsx)("div",{style:{marginTop:"-10px"},children:a.split(/\n/).map((function(e){return Object(v.jsx)("div",{children:e})}))})}(e.sortedHolding)]})]}),Object(v.jsxs)("div",{className:"button-row",children:[Object(v.jsx)("button",{onClick:function(){ie(!0),b("buyNow")},className:"button green-button",children:Object(v.jsx)("span",{children:"Buy"})}),Object(v.jsx)(K.a,{open:R,onClose:function(){return ie(!1)},children:Object(v.jsxs)(X.a,{sx:le.modal,children:[Object(v.jsx)("h3",{children:"Buy Modal"}),Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Order type :"}),Object(v.jsx)(J.a,{sx:le.radioList,fullWidth:!0,children:Object(v.jsxs)(ee.a,{row:!0,"aria-label":"gender",color:"black",defaultValue:"buyNow",name:"row-radio-buttons-group",onChange:function(e){b(e.target.value)},children:[Object(v.jsx)(te.a,{sx:le.radioButton,value:"buyNow",control:Object(v.jsx)(ae.a,{}),label:"BUY NOW"}),Object(v.jsx)(te.a,{sx:le.radioButton,value:"buyAt",control:Object(v.jsx)(ae.a,{}),label:"BUY AT"})]})})]}),Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Buy Amount :"}),Object(v.jsx)(ne.a,{sx:le.textBox,value:x,id:"outlined-basic",type:"number",label:"Quantity (in $)",variant:"outlined",onChange:function(e){O(e.target.value)}})]}),"buyAt"===u&&Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Buy AT Price :"}),Object(v.jsx)(ne.a,{sx:le.textBox,value:f,id:"outlined-basic",type:"number",label:"Price",variant:"outlined",onChange:function(e){w(Number(e.target.value))}})]}),Object(v.jsx)("button",{className:"button green-button",onClick:function(){console.log("clicked on buy"),ie(!1),O(null),w(null);var t={sybmol:Object(W.convertNameToTradingviewSybmol)(s),coinSelectedName:s,type:u,amount:Number(x),executeWhenPriceAt:Number(f),orderCompleted:!f};e.placeOrder(t)},children:Object(v.jsx)("span",{children:"Buy"})})]})}),Object(v.jsx)("button",{onClick:function(){me(!0),b("sortNow"),console.log("called sell")},className:"button blue-button",children:Object(v.jsx)("span",{children:"Sort"})}),Object(v.jsx)(K.a,{open:Oe,onClose:function(){return me(!1)},children:Object(v.jsxs)(X.a,{sx:le.modal,children:[Object(v.jsx)("h3",{children:"Sort Modal"}),Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Order type :"}),Object(v.jsx)(J.a,{sx:le.radioList,fullWidth:!0,children:Object(v.jsxs)(ee.a,{row:!0,"aria-label":"gender",color:"black",defaultValue:"sortNow",name:"row-radio-buttons-group",onChange:function(e){b(e.target.value)},children:[Object(v.jsx)(te.a,{sx:le.radioButton,value:"sortNow",control:Object(v.jsx)(ae.a,{}),label:"Sort NOW"}),Object(v.jsx)(te.a,{sx:le.radioButton,value:"sortAt",control:Object(v.jsx)(ae.a,{}),label:"Sort AT"})]})})]}),Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Sort Amount :"}),Object(v.jsx)(ne.a,{sx:le.textBox,value:x,id:"outlined-basic",type:"number",label:"Quantity (in $)",variant:"outlined",onChange:function(e){O(e.target.value)}})]}),"sortAt"===u&&Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Sort AT Price :"}),Object(v.jsx)(ne.a,{sx:le.textBox,value:P,id:"outlined-basic",type:"number",label:"Price",variant:"outlined",onChange:function(e){T(e.target.value)}})]}),Object(v.jsx)("button",{className:"button blue-button",onClick:function(){console.log("clicked on sort"),me(!1),O(null),T(null);var t={sybmol:Object(W.convertNameToTradingviewSybmol)(e.coinSelectedName),coinSelectedName:e.coinSelectedName,type:u,amount:Number(x),executeWhenPriceAt:Number(P),orderCompleted:!P};e.placeOrder(t)},children:Object(v.jsx)("span",{children:"Sort"})})]})}),Object(v.jsx)("button",{onClick:function(){je(!0),b(0===ve?"sellNow":"sellSortNow"),console.log("called sell")},className:"button red-button",children:Object(v.jsx)("span",{children:"Sell"})}),Object(v.jsx)(K.a,{open:be,onClose:function(){return je(!1)},children:Object(v.jsxs)(X.a,{sx:le.modal,children:[Object(v.jsx)(ce.a,{sx:le.bgtext,children:Object(v.jsxs)(re.a,{sx:le.tabsAlign,value:ve,onChange:function(e,t){we(t)},children:[Object(v.jsx)(se.a,{sx:le.bgtext,label:"Sell Normal"}),Object(v.jsx)(se.a,{sx:le.bgtext,label:"Sell Sort"})]})}),0===ve?Object(v.jsxs)(X.a,{sx:le.upMarign,children:[Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Order type :"}),Object(v.jsx)(J.a,{sx:le.radioList,fullWidth:!0,children:Object(v.jsxs)(ee.a,{row:!0,"aria-label":"gender",color:"black",defaultValue:"sellNow",name:"row-radio-buttons-group",onChange:function(e){b(e.target.value)},children:[Object(v.jsx)(te.a,{sx:le.radioButton,value:"sellNow",control:Object(v.jsx)(ae.a,{}),label:"SELL NOW"}),Object(v.jsx)(te.a,{sx:le.radioButton,value:"sellAt",control:Object(v.jsx)(ae.a,{}),label:"SELL AT"})]})})]}),Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Sell Amount :"}),Object(v.jsx)(ne.a,{sx:le.textBox,id:"outlined-basic",label:"Quantity (in $)",variant:"outlined",onChange:function(e){O(e.target.value)}})]}),"sellAt"===u&&Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Sell AT Price :"}),Object(v.jsx)(ne.a,{sx:le.textBox,value:N,id:"outlined-basic",type:"number",label:"Price",variant:"outlined",onChange:function(e){C(e.target.value)}})]}),Object(v.jsx)("button",{className:"button red-button",onClick:function(){ge(),console.log("clicked on sell");var t={sybmol:Object(W.convertNameToTradingviewSybmol)(s),coinSelectedName:s,type:u,amount:Number(x),executeWhenPriceAt:Number(N),orderCompleted:!N};e.placeOrder(t)},children:Object(v.jsx)("span",{children:"Sell"})})]}):Object(v.jsxs)(X.a,{sx:le.upMarign,children:[Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Order type :"}),Object(v.jsx)(J.a,{sx:le.radioList,fullWidth:!0,children:Object(v.jsxs)(ee.a,{row:!0,"aria-label":"gender",color:"black",defaultValue:"sellSortNow",name:"row-radio-buttons-group",onChange:function(e){b(e.target.value)},children:[Object(v.jsx)(te.a,{sx:le.radioButton,value:"sellSortNow",control:Object(v.jsx)(ae.a,{}),label:"SELL NOW"}),Object(v.jsx)(te.a,{sx:le.radioButton,value:"sellSortAt",control:Object(v.jsx)(ae.a,{}),label:"SELL AT"})]})})]}),Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Sell Amount :"}),Object(v.jsx)(ne.a,{sx:le.textBox,id:"outlined-basic",type:"number",label:"Quantity",variant:"outlined",onChange:function(e){O(e.target.value)}})]}),"sellSortAt"===u&&Object(v.jsxs)(Z.a,{sx:le.stack,direction:"row",spacing:2,children:[Object(v.jsx)("h3",{children:"Sell Sort at Price :"}),Object(v.jsx)(ne.a,{sx:le.textBox,value:D,id:"outlined-basic",type:"number",label:"Price",variant:"outlined",onChange:function(e){F(e.target.value)}})]}),Object(v.jsx)("button",{className:"button red-button",onClick:function(){console.log("clicked on Sell Sort"),ge();var t={sybmol:Object(W.convertNameToTradingviewSybmol)(s),coinSelectedName:s,type:u,amount:Number(x),executeWhenPriceAt:Number(N),orderCompleted:!N};console.log(t),e.placeOrder(t)},children:Object(v.jsx)("span",{children:"Sell Sort"})})]})]})})]})]})}var de=a(288),ue=a(325),be=a(310),je=a(314),he=a(313),xe=a(311),Oe=a(312),me=a(309),ge=a(315),pe=a(291),fe=a(308),ve=a(126),we=a.n(ve),Se=a(128),ye=a.n(Se),Ne=a(129),Ce=a.n(Ne),Ae=a(127),ke=a.n(Ae);function Pe(e){var t="rtl";var a=Object(de.a)((function(){return{whiteIcon:{color:"white"}}}))(),n=e.count,c=e.page,r=e.rowsPerPage,s=e.onPageChange;return Object(v.jsxs)(X.a,{sx:{flexShrink:0,ml:2.5},children:[Object(v.jsx)(fe.a,{onClick:function(e){s(e,0)},disabled:0===c,className:a.whiteIcon,"aria-label":"first page",children:"rtl"===t?Object(v.jsx)(we.a,{}):Object(v.jsx)(ke.a,{})}),Object(v.jsx)(fe.a,{onClick:function(e){s(e,c-1)},className:a.whiteIcon,disabled:0===c,"aria-label":"previous page",children:"rtl"===t?Object(v.jsx)(ye.a,{}):Object(v.jsx)(Ce.a,{})}),Object(v.jsx)(fe.a,{onClick:function(e){s(e,c+1)},disabled:c>=Math.ceil(n/r)-1,className:a.whiteIcon,"aria-label":"next page",children:"rtl"===t?Object(v.jsx)(Ce.a,{}):Object(v.jsx)(ye.a,{})}),Object(v.jsx)(fe.a,{onClick:function(e){s(e,Math.max(0,Math.ceil(n/r)-1))},disabled:c>=Math.ceil(n/r)-1,className:a.whiteIcon,"aria-label":"last page",children:"rtl"===t?Object(v.jsx)(ke.a,{}):Object(v.jsx)(we.a,{})})]})}var Te=Object(ue.a)((function(e){return{root:{borderRadius:"15px",width:"95%",overflowX:"auto",backgroundColor:"#131722",color:"blue"},table:{minWidth:500},head:{fontSize:"20px",color:"white"},tableRow:{"&$selected, &$selected:hover":{backgroundColor:"red"},color:"white"},tableCell:{color:"white"},hover:{},selected:{}}}))((function(e){var t=n.useState(0),a=Object(o.a)(t,2),c=a[0],r=a[1],s=n.useState(5),l=Object(o.a)(s,2),i=l[0],d=l[1],u=[],b=e.classes,j=0;e.allOrders.forEach((function(t){j+=1,u[e.allOrders.length-j]={id:j,time:t.time,name:t.coinSelectedName,coin:t.sybmol,amount:t.amount,coinBought:t.coinBought,type:t.type,status:t.orderCompleted?"true":"false",priceat:t.executeWhenPriceAt}}));var h=c>0?Math.max(0,(1+c)*i-u.length):0,x=function(t){if("false"===t.status||"sellNow"===t.type||"sellAt"===t.type)return null;if("buyNow"===t.type){var a=parseFloat(t.coinBought)*parseFloat(e.getCurrentPrice()[t.name])-parseFloat(t.amount);return"$ "+(a=a.toFixed(2))}if("sortNow"===t.type){var n=parseFloat(t.coinBought)*parseFloat(e.getCurrentPrice()[t.name]),c=parseFloat(t.amount)-n;return"$ "+(c=c.toFixed(2))}},O=function(t){if("false"===t.status||"sellNow"===t.type||"sellAt"===t.type)return null;if("buyNow"===t.type){var a=(parseFloat(t.coinBought)*parseFloat(e.getCurrentPrice()[t.name])-parseFloat(t.amount))/parseFloat(t.amount)*100;return(a=a.toFixed(2))+"%"}if("sortNow"===t.type){var n=parseFloat(t.coinBought)*parseFloat(e.getCurrentPrice()[t.name]),c=(parseFloat(t.amount)-n)/parseFloat(t.amount)*100;return(c=c.toFixed(2))+"%"}};return Object(v.jsx)(me.a,{className:b.root,children:Object(v.jsxs)(be.a,{className:b.table,children:[Object(v.jsx)(xe.a,{children:Object(v.jsxs)(Oe.a,{children:[Object(v.jsx)(he.a,{className:b.head}),Object(v.jsx)(he.a,{className:b.head,children:"Time"}),Object(v.jsx)(he.a,{className:b.head,children:"Coin"}),Object(v.jsx)(he.a,{className:b.head,children:"CoinCode"}),Object(v.jsx)(he.a,{className:b.head,children:"Amount"}),Object(v.jsx)(he.a,{className:b.head,children:"Gains"}),Object(v.jsx)(he.a,{className:b.head,children:"Gains Percent"}),Object(v.jsx)(he.a,{className:b.head,children:"Type"}),Object(v.jsx)(he.a,{className:b.head,children:"Order Completed"}),Object(v.jsx)(he.a,{className:b.head,children:"Price At"})]})}),Object(v.jsxs)(je.a,{children:[(i>0?u.slice(c*i,c*i+i):u).map((function(e){return Object(v.jsxs)(Oe.a,{className:b.tableRow,children:[Object(v.jsx)(he.a,{className:b.tableCell,component:"th",scope:"row"}),Object(v.jsx)(he.a,{className:b.tableCell,children:new Date(e.time).toLocaleString()}),Object(v.jsx)(he.a,{className:b.tableCell,children:e.name}),Object(v.jsx)(he.a,{className:b.tableCell,children:e.coin}),Object(v.jsx)(he.a,{className:b.tableCell,children:"$"+e.amount}),Object(v.jsx)(he.a,{className:b.tableCell,children:x(e)}),Object(v.jsx)(he.a,{className:b.tableCell,children:O(e)}),Object(v.jsx)(he.a,{className:b.tableCell,children:e.type}),Object(v.jsx)(he.a,{className:b.tableCell,children:e.status}),Object(v.jsx)(he.a,{className:b.tableCell,children:e.priceat?e.priceat:null})]},e.id)})),h>0&&Object(v.jsx)(Oe.a,{style:{height:50*h},children:Object(v.jsx)(he.a,{colSpan:6})})]}),Object(v.jsx)(ge.a,{children:Object(v.jsx)(Oe.a,{children:Object(v.jsx)(pe.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:0,sx:{color:"white"},count:u.length,rowsPerPage:i,page:c,onPageChange:function(e,t){r(t)},onRowsPerPageChange:function(e){d(parseInt(e.target.value,10)),r(0)},ActionsComponent:Pe})})})]})})})),Be=function(e){Object(x.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).arraysEqual=function(e,t){var a=function e(t,a){return"object"===typeof t&&Object.keys(t).length>0?Object.keys(t).length===Object.keys(a).length&&Object.keys(t).every((function(n){return e(t[n],a[n])})):t===a};return e.length===t.length&&e.every((function(e,n){return a(e,t[n])}))},n.getCurrentPrice=function(){return n.state.currentPrice},n.updatePrevCompletedOrders=Object(b.a)(Object(u.a)().mark((function e(){var t,a,c,r,s;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(n.state.allOrders,n.state.balance,n.state.holding,n.state.sortedHolding,n.getCurrentPrice);case 2:t=e.sent,a=t.newBalance,c=t.newHolding,r=t.newSortedHolding,s=t.updatedAllOrders,console.log(a,c,r,s),n.setState({balance:a,holding:c,sortedHolding:r,allOrders:s});case 9:case"end":return e.stop()}}),e)}))),n.placeOrder=function(e){if(console.log("order got at Home.js",e),null!==n.state.currentPrice[e.coinSelectedName]){switch(e.priceWhenOrderWasPlaced=Number(n.state.currentPrice[e.coinSelectedName]),e.type){case"buyNow":e.coinBought=e.amount/n.state.currentPrice[e.coinSelectedName];var t=N(n.state.balance,n.state.holding,e,n.state.currentPrice),a=t.success,c=t.newBalance,r=t.newHolding;if(!a)return;n.setState({balance:c,holding:r});break;case"sortNow":e.coinBought=e.amount/n.state.currentPrice[e.coinSelectedName];var s=C(n.state.balance,n.state.sortedHolding,e,n.state.currentPrice),o=s.success,l=s.newBalance,i=s.newSortedHolding;if(!o)return;n.setState({balance:l,sortedHolding:i});break;case"sellNow":var u=A(n.state.balance,n.state.holding,n.state.sortedHolding,e,n.state.currentPrice),b=u.success,j=u.newBalance,h=u.newHolding;if(!b)return;n.setState({balance:j,holding:h});break;case"buyAt":w("Your buy order has been placed, it will be automatically executed when the price will reach $".concat(Object(oe.numberWithCommas)(e.executeWhenPriceAt)));break;case"sortAt":w("Your sort order has been placed, it will be automatically executed when the price will reach $".concat(Object(oe.numberWithCommas)(e.executeWhenPriceAt)));break;case"sellAt":w("Your sell order has been placed, it will be automatically executed when the price will reach $".concat(Object(oe.numberWithCommas)(e.executeWhenPriceAt)));break;case"sellSortNow":var x=k(n.state.balance,n.state.sortedHolding,e,n.state.currentPrice),O=x.success,m=x.newBalance,g=x.newSortedHolding;if(!O)return;n.setState({balance:m,sortedHolding:g});break;case"sellSortAt":y("Sell Sort At is yet to be properly implemented!");break;default:return void console.log("Wrong Order type")}var p=n.state.allOrders.slice(),f=Object(d.a)({},e);console.log("tempORder",f),f.time=Date.now(),p.push(f),n.setState({allOrders:p}),console.log("order that was added: ",f)}else S("Order can't be placed websocket is not ready yet for the stock: ".concat(e.coinSelectedName))},n.remove=function(){console.log("pressed reset"),localStorage.clear(),n.setState({lastTotalAssetChange:"none",totalAssetAmt:1e4,balance:1e4,holding:{},sortedHolding:{},allOrders:[]}),w("All orders has been cleared")},n.lastTotalAssetChangeTimeout=null,n.state={userId:null,email:null,name:null,lastTotalAssetChange:"none",totalAssetAmt:"",balance:1e4,holding:{},sortedHolding:{},allOrders:[],coinSelectedName:"bitcoin",currentPrice:{bitcoin:null,ethereum:null,dogecoin:null,tesla:null}},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.quickUpdateCurrentPriceUsingApi(),this.startUpdatingCurrentPriceUsingWebsocket(),e.next=4,this.updateUserDataFromLocalStorage();case 4:this.updatePrevCompletedOrders();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var a=this,n=function(e,t,a,n){var c=e;for(var r in t){if(!n[r])return null;c+=t[r]*n[r]}for(var s in a){if(!n[s])return null;var o,l=Object(p.a)(a[s]);try{for(l.s();!(o=l.n()).done;){var i=o.value;c+=2*i.amount-i.coinBought*n[s]}}catch(d){l.e(d)}finally{l.f()}}return c}(this.state.balance,this.state.holding,this.state.sortedHolding,this.state.currentPrice);n&&this.state.totalAssetAmt!==n&&(this.state.totalAssetAmt=n),""!==t.totalAssetAmt&&(t.totalAssetAmt<this.state.totalAssetAmt?(clearTimeout(this.lastTotalAssetChangeTimeout),this.setState({lastTotalAssetChange:"positive"}),this.lastTotalAssetChangeTimeout=setTimeout((function(){a.setState({lastTotalAssetChange:"none"})}),1500)):t.totalAssetAmt>this.state.totalAssetAmt&&(clearTimeout(this.lastTotalAssetChangeTimeout),this.setState({lastTotalAssetChange:"negative"}),this.lastTotalAssetChangeTimeout=setTimeout((function(){a.setState({lastTotalAssetChange:"none"})}),1500)));var c=Object(d.a)({},this.state);delete c.coinSelectedName,delete c.currentPrice,delete c.totalAssetAmt,window.localStorage.setItem("userData",JSON.stringify(c)),t.balance!=this.state.balance&&this.updateDbFromLocalStorage()}},{key:"updateUserDataFromLocalStorage",value:function(){var e=Object(b.a)(Object(u.a)().mark((function e(){var t,a,n,c,r,s,o,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=JSON.parse(window.localStorage.getItem("userData")),console.log("userdata in localStorage",t),t&&(a=t.userId,n=t.email,c=t.name,r=t.balance,s=t.holding,o=t.sortedHolding,l=t.allOrders,this.setState({userId:a,email:n,name:c,balance:r,holding:s,sortedHolding:o,allOrders:l}))}catch(i){console.log("cant read userData from local storage",i)}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateDbFromLocalStorage",value:function(){var e=Object(b.a)(Object(u.a)().mark((function e(){var t,a,n,c;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={"Content-Type":"application/json",charset:"UTF-8"},a=JSON.parse(window.localStorage.getItem("userData")),console.log("THis is uid"+JSON.stringify(a)),n={email:a.email,userId:a.userId,holding:a.holding,balance:a.balance,allOrders:a.allOrders,sortedHolding:a.sortedHolding},e.next=7,g()({method:"POST",data:n,headers:{headers:t},withCredentials:!0,url:"/user/updateUserData"});case 7:(c=e.sent).data.success&&console.log("Data Update in Db from Local Success: ",c.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Data Update in Db from Local Failed",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"quickUpdateCurrentPriceUsingApi",value:function(){var e={method:"get",url:"https://api.coincap.io/v2/rates/bitcoin",headers:{},raxConfig:{retry:3,retryDelay:500}};g()(e).then(function(e){var t=e.data.data.rateUsd,a=Object(d.a)({},this.state.currentPrice);a.bitcoin=t,this.setState({currentPrice:a})}.bind(this)).catch((function(e){console.log("error updating currentPrice of bitcoin by API",e)}));e={method:"get",url:"https://api.coincap.io/v2/rates/ethereum",headers:{},raxConfig:{retry:3,retryDelay:500}};g()(e).then(function(e){var t=e.data.data.rateUsd,a=Object(d.a)({},this.state.currentPrice);a.ethereum=t,this.setState({currentPrice:a})}.bind(this)).catch((function(e){console.log("error updating ethereum currentPrice by API",e)}));e={method:"get",url:"https://api.coincap.io/v2/rates/dogecoin",headers:{},raxConfig:{retry:3,retryDelay:500}};g()(e).then(function(e){var t=e.data.data.rateUsd,a=Object(d.a)({},this.state.currentPrice);a.dogecoin=t,this.setState({currentPrice:a})}.bind(this)).catch((function(e){console.log("error updating currentPrice by API",e)}))}},{key:"startUpdatingCurrentPriceUsingWebsocket",value:function(){new WebSocket("wss://ws.coincap.io/prices?assets=bitcoin,ethereum,dogecoin").onmessage=function(e){e=JSON.parse(e.data);var t=Object(d.a)({},this.state.currentPrice);e.bitcoin&&(t.bitcoin=e.bitcoin),e.ethereum&&(t.ethereum=e.ethereum),e.dogecoin&&(t.dogecoin=e.dogecoin),this.setState({currentPrice:t})}.bind(this)}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"Home",children:[Object(v.jsx)(T,{}),Object(v.jsxs)("div",{className:"Content",children:[Object(v.jsx)(F,{coinSelectedName:this.state.coinSelectedName}),Object(v.jsx)(ie,{totalAssetAmt:this.state.totalAssetAmt,balance:this.state.balance,holding:this.state.holding,sortedHolding:this.state.sortedHolding,lastTotalAssetChange:this.state.lastTotalAssetChange,placeOrder:this.placeOrder,currentPrice:this.state.currentPrice,coinSelectedName:this.state.coinSelectedName,onChange:function(t){return e.setState({coinSelectedName:t})}})]}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingBottom:"20px",paddingRight:"30px"},children:[Object(v.jsx)("h1",{style:{textAlign:"center",paddingRight:"500px"},children:"Order Table"}),Object(v.jsx)("button",{className:"button",onClick:this.remove,children:Object(v.jsx)("span",{children:"Reset"})})]}),Object(v.jsx)("div",{className:"Content",children:Object(v.jsx)(Te,{allOrders:this.state.allOrders,getCurrentPrice:this.getCurrentPrice})})]})}}]),a}(n.Component);a(204);var He=function(e){Object(i.m)();var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),j=Object(o.a)(s,2),h=j[0],x=j[1],O=Object(n.useState)(""),m=Object(o.a)(O,2),p=m[0],f=m[1],w=Object(n.useState)(null),S=Object(o.a)(w,2),y=(S[0],S[1],function(){var e=Object(b.a)(Object(u.a)().mark((function e(){var t,a,n,r,s,o;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={"Content-Type":"application/json",charset:"UTF-8"},console.log("Reached login"),e.next=4,g()({method:"POST",data:{email:c,password:h},headers:{headers:t},withCredentials:!0,url:"/user/login"});case 4:if(!(a=e.sent).data.success){e.next=19;break}return console.log("login success user data: ",a.data.user),f(a.data.user.id),console.log("ejifwef"+p),n={email:c,password:h,id:a.data.user.id},e.next=12,g()({method:"POST",data:n,headers:{headers:t},withCredentials:!0,url:"/user/userOrder"});case 12:(r=e.sent).data.success&&console.log("resOrders Response "+JSON.stringify(r.data.userData)),s=a.data.user,o=r.data.userData[0],Object(d.a)(Object(d.a)({},s),o),window.localStorage.setItem("userData",JSON.stringify(o)),window.location.href="/";case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)(T,{}),Object(v.jsxs)("div",{className:"center",children:[Object(v.jsx)("h1",{children:"Login"}),Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(v.jsxs)("div",{className:"txt_field",children:[Object(v.jsx)("input",{type:"text",required:!0,onChange:function(e){r(e.target.value)}}),Object(v.jsx)("span",{}),Object(v.jsx)("label",{children:"Email"})]}),Object(v.jsxs)("div",{className:"txt_field",children:[Object(v.jsx)("input",{type:"password",required:!0,onChange:function(e){x(e.target.value)}}),Object(v.jsx)("span",{}),Object(v.jsx)("label",{children:"Password"})]}),Object(v.jsx)("div",{className:"pass",onClick:function(){},children:"Forgot Password?"}),Object(v.jsx)("input",{type:"submit",value:"Login",onClick:y}),Object(v.jsxs)("div",{className:"signup_link",children:["Not a member?",Object(v.jsx)(l.b,{to:"/register",children:"Signup"})]})]})]})]})};a(205);var We=function(e){Object(i.m)();var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),d=Object(o.a)(s,2),j=d[0],h=d[1],x=Object(n.useState)(""),O=Object(o.a)(x,2),m=O[0],p=O[1],f=function(){var e=Object(b.a)(Object(u.a)().mark((function e(){var t,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("going to post"),t={"Content-Type":"application/json",charset:"UTF-8"},e.next=4,g()({method:"POST",data:{name:c,email:j,password:m},headers:{headers:t},withCredentials:!0,url:"/user/register"});case 4:a=e.sent,console.log("after await res ",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e){e.preventDefault()};return Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:"center",children:[Object(v.jsx)("h1",{children:"Register"}),Object(v.jsxs)("form",{onSubmit:w,children:[Object(v.jsxs)("div",{className:"txt_field",children:[Object(v.jsx)("input",{type:"text",required:!0,onChange:function(e){r(e.target.value)}}),Object(v.jsx)("span",{}),Object(v.jsx)("label",{children:"Name"})]}),Object(v.jsxs)("div",{className:"txt_field",children:[Object(v.jsx)("input",{type:"email",required:!0,onChange:function(e){h(e.target.value)}}),Object(v.jsx)("span",{}),Object(v.jsx)("label",{children:"Email"})]}),Object(v.jsxs)("div",{className:"txt_field",children:[Object(v.jsx)("input",{type:"password",required:!0,onChange:function(e){p(e.target.value)}}),Object(v.jsx)("span",{}),Object(v.jsx)("label",{children:"Password"})]}),Object(v.jsx)("div",{className:"pass",onClick:w,children:"Forgot Password?"}),Object(v.jsx)("input",{type:"submit",value:"Register",onClick:f}),Object(v.jsxs)("div",{className:"signup_link",children:["Already a member?",Object(v.jsx)(l.b,{to:"/login",children:"Login"})]})]})]})})};a(206);var De=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=(t[0],t[1],Object(n.useState)({})),c=Object(o.a)(a,2);return c[0],c[1],Object(v.jsx)(l.a,{children:Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(i.c,{children:[Object(v.jsx)(i.a,{exact:!0,path:"/login",element:Object(v.jsx)(He,{})}),Object(v.jsx)(i.a,{exact:!0,path:"/register",element:Object(v.jsx)(We,{})}),Object(v.jsx)(i.a,{exact:!0,path:"/",element:Object(v.jsx)(Be,{})})]})})})};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(De,{})}),document.getElementById("root"))},76:function(e,t){var a={bitcoin:"BINANCE:BTCUSDT",ethereum:"BINANCE:ETHUSDT",dogecoin:"BINANCE:DOGEUSDT",tesla:"NASDAQ:TSLA"};e.exports={nameTradingviewSybmol:a,convertNameToTradingviewSybmol:function(e){var t=a[e];if(!Symbol)throw new Error("The selected name doesnt have a Tradingview sybmol!!");return t}}},77:function(e,t){e.exports={numberWithCommas:function(e){return e.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}}}},[[207,1,2]]]);
//# sourceMappingURL=main.3f35abde.chunk.js.map